@model TJOHora_CA1MVC.ViewModels.CartViewModel
@{
    ViewData["Title"] = "index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">E-COMMERCE CART</h1>
    </div>
</section>

@if (@Model.Cart.CartItems.Count == 0)
{
    <h2>Cart is empty!</h2>
}
else
{
    <div class="container mb-4">
        <div class="row">
            <div class="col-12">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col"> </th>
                                <th scope="col">Product</th>
                                <th scope="col">Available</th>
                                <th scope="col" class="text-center">Quantity</th>
                                <th scope="col" class="text-right">Price</th>
                                <th> </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Cart.CartItems)
                            {
                                <tr>
                                    <td><img src="https://dummyimage.com/50x50/55595c/fff" /> </td>
                                    <td>@item.Game.name</td>
                                    <td>In stock</td>
                                    <td>@item.NoOfItems</td>
                                    <td class="text-right">@((item.NoOfItems * item.Game.Price).ToString("c"))</td>
                                    <td class="text-right"><a class="btn btn-sm btn-danger" asp-controller="Cart" asp-action="RemoveFromShoppingCart" asp-route-id="@item.CartItemId"><i class="fa fa-trash">Remove</i> </a> </td>
                                </tr>
                            }
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td><strong>Total</strong></td>
                                <td class="text-right"><strong>@Model.CartTotal.ToString("c")</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col mb-2">
                <div class="row">
                    <div class="col-sm-12  col-md-6">
                        <a asp-area="" asp-controller="Game" asp-action="List"><button class="btn btn-block btn-light">Continue Shopping</button></a>
                    </div>
                    <div class="col-sm-12 col-md-6 text-right">
                        <button class="btn btn-lg btn-block btn-success text-uppercase" asp-area="" asp-controller="Home" asp-action="Index">Checkout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}